for d in lnamd64/[23]*; do \
  ( \
    cd $d; \
    for f in ../../src/*.[ch] ../../src/makefile; do \
      if [ ! -f `basename $f` ]; then \
        echo "# linking to" $f "in" $d; \
        ln -s $f .; \
      fi; \
    done; \
    echo ""; \
    echo "# building library in" $d; \
    if [ "" = "1" ]; then \
	echo "# using gcc64"; \
	make ARCHC=gcc64 -k>makelog 2>&1; \
    else \
	if [ "" = "1" ]; then \
		echo "# using gcc"; \
		make ARCHC=gcc -k>makelog 2>&1; \
	else \
		make -k>makelog 2>&1; \
	fi; \
    fi;\
    cat makelog; \
  ) \
done

# building library in lnamd64/2ddp
make[1]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp'
make[2]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp'
make libudf.so "CFLAGS=-D_lnamd64 -D_GNU_SOURCE -fpic -shared -ansi -Wall -O -DPTR_RESTRICT=	" "LDFLAGS=-shared -lm"
make[3]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp'
make[3]: `libudf.so' is up to date.
make[3]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp'
make[2]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp'
make[1]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp'

# building library in lnamd64/2ddp_host
make[1]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_host'
# Generating udf_names.c because of makefile properties.c
make[2]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_host'
make libudf.so "CFLAGS=-D_lnamd64 -D_GNU_SOURCE -fpic -shared -ansi -Wall -O -DPTR_RESTRICT=	" "LDFLAGS=-shared -lm"
make[3]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_host'
# Compiling udf_names.o because of udf_names.c
cc -D_lnamd64 -D_GNU_SOURCE -fpic -shared -ansi -Wall -O -DPTR_RESTRICT=	 -I/home/ansys_inc/v145/fluent/fluent14.5.7/`expr "\`pwd\`" : '.*/\(.*\)/[23].*'`/`basename "\`pwd\`"` -I/home/ansys_inc/v145/fluent/fluent14.5.7/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/cortex/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/client/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/tgrid/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/multiport/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/multiport/mpi_wrapper/include -I/home/ansys_inc/v145/fluent/fluent14.5.7/multiport/mpi_wrapper/src -I. -c udf_names.c
# Linking libudf.so because of user.udf udf_names.c udf_names.o
ld -shared -lm udf_names.o properties.o  -o libudf.so
make[3]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_host'
make[2]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_host'
make[1]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_host'

# building library in lnamd64/2ddp_node
make[1]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_node'
# Generating udf_names.c because of makefile properties.c
make[2]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_node'
make libudf.so "CFLAGS=-D_lnamd64 -D_GNU_SOURCE -fpic -shared -ansi -Wall -O -DPTR_RESTRICT=	" "LDFLAGS=-shared -lm"
make[3]: Entering directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_node'
# Compiling udf_names.o because of udf_names.c
cc -D_lnamd64 -D_GNU_SOURCE -fpic -shared -ansi -Wall -O -DPTR_RESTRICT=	 -I/home/ansys_inc/v145/fluent/fluent14.5.7/`expr "\`pwd\`" : '.*/\(.*\)/[23].*'`/`basename "\`pwd\`"` -I/home/ansys_inc/v145/fluent/fluent14.5.7/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/cortex/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/client/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/tgrid/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/multiport/src -I/home/ansys_inc/v145/fluent/fluent14.5.7/multiport/mpi_wrapper/include -I/home/ansys_inc/v145/fluent/fluent14.5.7/multiport/mpi_wrapper/src -I. -c udf_names.c
# Linking libudf.so because of user.udf udf_names.c udf_names.o
ld -shared -lm udf_names.o properties.o  -o libudf.so
make[3]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_node'
make[2]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_node'
make[1]: Leaving directory `/home/hobold/lepten/coolprop/wrappers/Fluent/libudf/lnamd64/2ddp_node'
